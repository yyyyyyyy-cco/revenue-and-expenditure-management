# 新功能 (Feat) 内容汇总：增强统计分析模块

本周对“收支管理系统”的统计分析模块进行了深度升级，从单一的时间维度扩展到了全方位、多维度的财务看板。

---

## 1. 核心功能 (Features)

### 📈 多维度收支趋势
- **动态粒度切换**：支持“周”、“月”、“年”三种维度的趋势分析。
- **混合图表展示**：
  - **柱状图**：对比展示各项时段内的收入与支出。
  - **折线图**：展示净收益（收入-支出）的变化，直观反映财务结余走向。
- **数据回溯**：
  - 周维度查看**本周（周一至周日）**的每日收支详细对比。
  - 月维度查看最近 6 个月的月度趋势。
  - 年维度查看最近 5 年的年度趋势。

### 📊 账单来源分布 (New!)
- **来源分析**：自动统计并展示账单的原始来源。
- **分类展示**：包括“手动录入”、“支付宝导入”及“微信导入”。
- **南丁格尔玫瑰图**：使用极坐标系展示不同来源的金额占比，更加直观美观。

### 🔘 支出分类升级
- **环形交互图**：支持点击、悬浮查看各支出分类的具体金额与百分比。
- **配色优化**：采用更具层次感的调色盘。

---

## 2. 技术实现 (Technical Specs)

### 后端 (Backend)
- **接口增强**：`GET /stats/trend` 新增可选参数 `granularity`。
- **新接口**：`GET /stats/source-ratio` 提供按来源分组的聚合数据。
- **SQL 优化**：使用 SQLite 的 `strftime` 函数高效处理不同时间粒度的日期格式化与聚合。

### 前端 (Frontend)
- **ECharts 深度定制**：利用 `graphic.LinearGradient` 实现渐变色效果，增加视觉深度。
- **响应式布局**：统计卡片与图表自适应不同尺寸的屏幕。
- **数据驱动**：集成 `fetch` 调用与 `reactive` 状态管理，实现图表数据的实时刷新。

---

## 3. 使用方法 (Usage)
1. 进入系统后点击左侧导航栏的 **“收支统计”**。
2. 在趋势图右上角切换 **“周/月/年”**。
3. 悬浮在图表上查看详细数据。
4. 观察页面底部的 **“账单来源分布”** 以了解您的记账习惯。

---

> [!TIP]
> 所有的更新已同步至根目录的 `README.md` 和 `backend/API_DOCUMENTATION.md`。
